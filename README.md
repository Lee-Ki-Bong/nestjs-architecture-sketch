## 시작하기 전에

처음부터 너무 많은 개념을 동시에 제공하면 책상에 두꺼운 책을 턱하니 올려놓는 것과 같을 것이다. ~~(docs를 잘 보지 않는 이유…)~~

빈 캔버스에 그림을 그리듯이 NestJS를 전체적으로 스케치 한 뒤, 부위 별로 색을 채워가는 형태의 tutorial 을 구상해보았다.

이 tutorial 은 NestJS 가 어떻게 디자인 되어있는지 소개하면서 핵심적인 개념과 기능에 초점을 맞추었다.

더 자세한 정보를 얻고자 한다면 공식 docs를 정독하길 바란다. [링크](https://docs.nestjs.com/)

## 핵심개념

NestJS를 살펴보기 전에 딱 두 가지 개념을 간단히 소개하고 시작하겠다.

### IoC 제어 역전(Inversion of Control)

- 제어역전을 한마디로 표현한다면 "개발자 대신 프레임워크가 제어 한다" 이다.
- 프레임워크에서 개발자가 작성한 코드를 필요한 시점에 알아서 실행시키게끔 제어를 가져가는 것이 IoC의 핵심 개념이다.

### 의존성 주입(Dependency Injection)

- 의존성 주입은 프레임워크가 주체가 되어 개발자가 등록한 클래스들을 알아서 관리해준다는 개념이다.

### 정리

- 정리하자면, Ioc는 추상적인 개념이고 이를 실제 구현한 것이 DI 로 이해하면 된다.
- Nestjs는 의존성 주입(Dependency Injection)을 통해 IoC 제어 역전(Inversion of Control)를 구현한 프레임워크 이다.
- 프레임워크가 의존성을 관리해주기 때문에 앞으로 제시하는 코드에서는 new 연산자는 보이지 않을 것이다.

### TMI

객체지향적 설계의 트렌드는 구체적인 개념에 종속 & 의존하지 않고 추상적인 개념에 의존하려고 한다.
이는 시스템의 유연성과 재사용성을 높이기 위한 노력이 주요 키워드라는 것으로 이해할 수 있다.

## NestJS 소개

NestJS는 다음과 같은 핵심구성들과 각각의 원칙들이 존재한다. 한번씩 이런게 있구나 하면서 넘어가길 바란다.

### 모듈(Module):

- NestJS 애플리케이션을 구성하는 단위이다.
- 모듈은 자신이 필요하거나 공개할 기능을 정의하고 그룹화 한다.
- 잘 그룹화된 모듈은 재사용 가능한 단위로 활용된다.

### 프로바이더(Provider):

- 서비스, 미들웨어, 인터셉터, 가드, 레포지토리 등의 컴포넌트들을 통칭 프로바이더 라고 한다.
- 프로바이더는 싱글톤으로 관리되며, 특정한 문법을 통해 애플리케이션 전체에서 공유할 수 있다.
- 컨트롤러는 요청을 처리하는 주체가 아닌 라우터 역할만 하도록 하며, 실제 작업들의 주체는 프로바이더들에게 위임해야한다.

### 컨트롤러(Controller):

- 컨트롤러는 요청을 받고 응답을 반환하는 역할을 한다.
- 별도의 설정 없이 어떤 것을 리턴하여도, string 이나 JSON 형으로 각각 상황에 맞는 응답을 보내게 기본 동작이 내장되어 있다.
- 컨트롤러는 모듈에 속하며, NestJS만의 방식에 의해 라우터를 매핑 한다.

### 서비스(Service)

- 프로바이더를 대표하는 구성중에 하나가 Service 이다.
- 컨트롤러와 데이터 접근 계층 사이의 중간 역할이다.

### 레포지토리(Repository)

- 데이터베이스와의 상호작용을 담당하는 역할이다.
- DB와 상호작용하기위해 ORM(Object-Relational Mapping) 라이브러리를 사용하는데, 우리는 TypeORM을 사용할 것이다.

### 미들웨어(Middleware):

- 미들웨어는 요청과 응답 사이에서 동작한다.
- 미들웨어는 요청 또는 응답을 변형하거나, 다음 미들웨어로 제어를 전달할 수 있다.
- 전역적으로, 컨트롤러별로 메서드별로 적용할 수 있다.
- Express와 유사한 미들웨어 개념을 사용한다.

### 인터셉터(Interceptor):

- 인터셉터는 요청과 응답을 가로채고 가공하는 역할을 한다.
- 전역적으로, 컨트롤러별로 또는 핸들러 메서드별로 적용할 수 있다.

### 가드(Guard):

- 가드는 요청을 처리하기 전에 인증, 권한 검사 등을 수행하는 역할을 한다.
- 요청을 처리할 수 있는 권한이 있는지 확인하고, 요청을 차단하거나 통과시킬 수 있다.

### 예외필터(Exception Filter):

- 필터는 예외 처리를 담당한다.
- 예외가 발생한 경우 호출되며, 적절한 응답을 반환하고 오류 처리를 수행한다.

### 파이프(Pipe)

- 파이프는 요청 데이터의 유효성 검사, 변환 및 필터링 처리를 수행한다.
- 내장된 몇 가지 유용한 파이프를 제공하며, 직접 커스텀 하여 사용할 수 있다.

## NestJS 들여다보기

### 프로젝트 생성

```
root@8aece4bfc5fa:/home# nest new
⚡  We will scaffold your app in a few seconds..
? What name would you like to use for the new project? nest-sketch
? Which package manager would you ❤️  to use? npm
```
